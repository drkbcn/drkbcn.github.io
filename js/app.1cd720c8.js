(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";e("85ec")},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i,s,o=e("2b0e"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("loading",{attrs:{active:t.isLoading,width:t.width,opacity:t.opacity,loader:t.style,color:t.colorLoader,"is-full-page":t.fullPage},on:{"update:active":function(a){t.isLoading=a}}}),e("NewPrecioLuz",{attrs:{msg:"Precios de la Luz para hoy"},on:{toggleLoading:t.toggleLoading}}),e("Footer",{attrs:{copyright:"Sugerencias/contacto",email:"contacto@menudotimo.com"}})],1)},r=[],c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("vs-row",[e("vs-col",{attrs:{"vs-w":"2","vs-sm":"1","vs-lg":"4"}}),e("vs-col",{attrs:{"vs-w":"8","vs-sm":"10","vs-lg":"4"}},[e("div",{staticClass:"fecha"},[e("date-picker",{attrs:{"value-type":"format",format:"DD/MM/YYYY","disabled-date":t.notAfterToday},on:{change:function(a){return t.setStartandEnd(t.fecha)}},model:{value:t.fecha,callback:function(a){t.fecha=a},expression:"fecha"}})],1),e("vs-select",{staticClass:"mb-6",attrs:{id:"zona",name:"zona",width:"100%"},on:{change:function(a){return t.refresh()}},model:{value:t.zona,callback:function(a){t.zona=a},expression:"zona"}},[e("vs-select-item",{attrs:{value:"peninsular",text:"Pen√≠nsula"}}),e("vs-select-item",{attrs:{value:"baleares",text:"Baleares"}}),e("vs-select-item",{attrs:{value:"canarias",text:"Canarias"}}),e("vs-select-item",{attrs:{value:"ceuta",text:"Ceuta"}}),e("vs-select-item",{attrs:{value:"melilla",text:"Melilla"}})],1),e("div",{staticClass:"header-block"},[e("div",{staticClass:"hora-actual"},[t._v("üïò Hora actual: "+t._s(t.hora_actual))]),e("div",{staticClass:"precio-actual"},[t._v(" "+t._s(t.getIcon(t.active_price))+" Precio actual: "+t._s(t._f("toKWh")(t.active_price))+" ‚ö°Ô∏è ")]),e("div",{staticClass:"min-precio"},[t._v("‚ôªÔ∏è M√≠nima diaria: "+t._s(t._f("toKWh")(t.minima))+" ‚ö°Ô∏è")]),e("div",{staticClass:"max-precio"},[t._v(" ‚õîÔ∏è M√°xima diaria: "+t._s(t._f("toKWh")(t.maxima))+" ‚ö°Ô∏è ")]),e("div",{staticClass:"media-precio"},[t._v(" "+t._s(t.getIcon(t.media_diaria))+" Media diaria: "+t._s(t._f("toKWh")(t.media_diaria))+" ‚ö°Ô∏è ")])]),e("Barra3",{ref:"grafico"}),t.chart_datos?e("div",t._l(t.chart_datos,(function(a){return e("div",{key:a.value},[e("div",{class:[t.isActiveHour(a.datetime),t.pastHour(a.datetime)]},[t._v(" "+t._s(t.isMin(a.value)?"‚ôªÔ∏è":"")+" "+t._s(t.isMax(a.value)?"‚õîÔ∏è":"")+" "+t._s(t.getIcon(a.value))+" "),e("span",{staticClass:"hour-text"},[t._v(" "+t._s(t._f("toHora")(a.datetime))+" ")]),t._v(" - "+t._s(t._f("toKWh")(a.value))+" ‚ö°Ô∏è ")])])})),0):e("div",[t._v("Obteniendo datos en tiempo real...")])],1),e("vs-col",{attrs:{"vs-w":"2","vs-sm":"1","vs-lg":"4"}})],1)},l=[],u=e("3835"),d=(e("d3b7"),e("ddb0"),e("d81d"),e("4fad"),e("b680"),e("4de4"),e("fb6a"),e("bc3a")),m=e.n(d),f=e("c1df"),h=e.n(f),_=e("1fca"),v={name:"Barra3",extends:_["a"],components:{LineChart:_["a"]},data:function(){return{datacollection:{filled:!1,labels:[],datasets:[{label:"Evoluci√≥n Precios",backgroundColor:"rgba(147, 197, 253)",data:[]}]}}},mounted:function(){this.renderChart(this.datacollection)}},p=v,g=e("2877"),H=Object(g["a"])(p,i,s,!1,null,null,null),b=H.exports,Y={name:"NewPrecioLuz",props:{msg:String},components:{Barra3:b},data:function(){return{url_api:"https://apidatos.ree.es/es/datos/mercados/precios-mercados-tiempo-real?time_trunc=hour&",url_dates:null,url_zona:null,chart_datos:null,active_price:0,suma_total:0,media_diaria:0,minima:1e5,maxima:0,hora_actual:null,junkievar:null,icono_rojo:"üî¥",icono_amarillo:"üü°",icono_verde:"üü¢",fecha:null,zona:"peninsular",zonas:["peninsular","canarias","baleares","ceuta","melilla"],start_date:null,end_date:null}},methods:{notAfterToday:function(t){return t>new Date((new Date).setHours(0,0,0,0))},refresh:function(){this.$emit("toggleLoading"),this.url_zona="&geo_limit="+this.zona,this.get_api_data()},getIcon:function(t){return t<=150?this.icono_verde:t>250?this.icono_rojo:this.icono_amarillo},pastHour:function(t){return h()(t).format("HH")<h()().format("HH")?"list-past":""},isActiveHour:function(t){return h()(t).format("HH")===h()().format("HH")?"list-active":"list"},get_api_data:function(){var t=this;m.a.get(this.url_api+this.url_dates+this.url_zona).then((function(a){t.chart_datos=a.data.included[0].attributes.values,t.calculateData(),t.$emit("toggleLoading"),t.$vs.notify({color:"success",title:'<span class="material-icons">sync</span>',text:"Datos recuperados satistactoriamente para zona "+t.capitalize(t.zona),duration:2e3})})).catch((function(a){t.$emit("toggleLoading"),t.$vs.notify({color:"danger",title:'<span class="material-icons">error</span>',text:"Sucedi√≥ un error: "+a.response.data.errors[0].detail,duration:5e3})}))},isMin:function(t){return t===this.minima},isMax:function(t){return t===this.maxima},calculateData:function(){var t=this,a=h()().format("HH");this.resetVars(),Object.entries(this.chart_datos).map((function(e){var i=Object(u["a"])(e,2),s=i[0],o=i[1];t.junkievar=s,t.suma_total+=o.value,t.$refs.grafico.datacollection.labels.push(h()(o.datetime).format("HH:mm")),t.$refs.grafico.datacollection.datasets[0].data.push((o.value/1e3).toFixed(4)),o.value>t.maxima&&(t.maxima=o.value),o.value<t.minima&&(t.minima=o.value),h()(o.datetime).format("HH")===a&&(t.active_price=o.value)})),this.$refs.grafico.renderChart(this.$refs.grafico.datacollection),this.media_diaria=this.suma_total/24},onlyPast:function(){var t=h()().format("HH");return this.chart_datos.filter((function(a){return h()(a.datetime).format("HH")<t}))},resetVars:function(){this.suma_total=0,this.minima=1e5,this.maxima=0,this.$refs.grafico.datacollection.labels=[],this.$refs.grafico.datacollection.datasets[0].data=[]},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},setStartandEnd:function(t){this.start_date=h()(t,"DD/MM/YYYY").startOf("day").format("YYYY-MM-DDTHH:mm:ss"),this.end_date=h()(t,"DD/MM/YYYY").endOf("day").format("YYYY-MM-DDTHH:mm:ss"),this.url_dates="start_date="+this.start_date+"&end_date="+this.end_date,this.refresh()}},mounted:function(){this.start_date=h()().startOf("day").format("YYYY-MM-DDTHH:mm:ss"),this.end_date=h()().endOf("day").format("YYYY-MM-DDTHH:mm:ss"),this.hora_actual=h()().format("HH:mm"),this.url_dates="start_date="+this.start_date+"&end_date="+this.end_date,this.url_zona="&geo_limit="+this.zona,this.fecha=h()().format("DD/MM/YYYY"),this.get_api_data()},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toKWh:function(t){return(t/1e3).toFixed(4)+" ‚Ç¨ KW/h"},toHora:function(t){return h()(t).format("HH:mm")}}},x=Y,y=Object(g["a"])(x,c,l,!1,null,null,null),D=y.exports,M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"footer"},[t._v(" CopyRight "+t._s(t.anyo)+" - "+t._s(t.copyright)+" <"),e("a",{attrs:{href:"mailto:"+t.email,target:"_blank"}},[t._v(t._s(t.email))]),t._v("> "),e("br"),e("i",[t._v("Datos obtenidos de RED El√©ctrica de Espa√±a")])])},w=[],z={name:"Footer",props:{copyright:String,email:String},data:function(){return{anyo:null}},mounted:function(){this.anyo=h()().format("YYYY")}},C=z,L=Object(g["a"])(C,M,w,!1,null,null,null),k=L.exports,O=e("9062"),$=e.n(O),j=(e("e40d"),{name:"App",components:{Loading:$.a,NewPrecioLuz:D,Footer:k},data:function(){return{width:100,fullPage:!0,style:"dots",opacity:.9,colorLoader:"#3b82f6",isLoading:!0}},methods:{toggleLoading:function(){this.isLoading=!this.isLoading}}}),E=j,P=(e("034f"),Object(g["a"])(E,n,r,!1,null,null,null)),T=P.exports,A=(e("a766"),e("04f2"),e("fb9a")),K=e.n(A),S=e("ec45");e("411c"),e("4375");o["default"].use(K.a),o["default"].component("date-picker",S["default"]),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(T)}}).$mount("#app")},7830:function(t,a,e){var i={"./es":"898b","./es.js":"898b"};function s(t){var a=o(t);return e(a)}function o(t){if(!e.o(i,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=o,t.exports=s,s.id="7830"},"85ec":function(t,a,e){},a766:function(t,a,e){}},[[0,"runtime","vsax","chartjs","chunk-vendors"]]]);
//# sourceMappingURL=app.1cd720c8.js.map